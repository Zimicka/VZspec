<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Skákací Hra - 🚗</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
      background: #e0f7fa;
    }
    #game, #menu, #pauseOverlay, #carSelection {
      position: absolute;
      width: 100vw;
      height: 100vh;
      background-color: #e0f7fa;
    }
    .centered {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
    .title {
      font-size: 72px;
      color: #d32f2f;
      font-weight: 900;
      background: rgba(255, 255, 255, 0.8);
      padding: 20px 40px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    .game-button {
      display: block;
      font-size: 28px;
      margin: 15px auto;
      padding: 10px 20px;
      background: #00897b;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      font-weight: bold;
    }
    .game-button:hover {
      background: #00695c;
    }
    #car {
      position: absolute;
      font-size: 40px;
      left: 100px;
      top: 200px;
      transform: scaleX(-1);
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #carBox {
      position: absolute;
      width: 30px;
      height: 30px;
      background: transparent;
      left: 5px;
      top: 5px;
    }
    .pipe {
      position: absolute;
      width: 60px;
      background-color: #4CAF50;
    }
    .pipe-top {
      top: 0;
    }
    .pipe-bottom {
      bottom: 0;
    }
    #score {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 32px;
      color: #d50000;
      font-weight: bold;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px;
      border-radius: 10px;
    }
    .car-option {
      font-size: 32px;
      margin: 10px;
      cursor: pointer;
    }
    .locked {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div id="menu" class="centered">
    <div class="title">🚗 Flappy Auto</div>
    <button class="game-button" onclick="startGame()">▶️ Hrát</button>
    <button class="game-button" onclick="openCarSelection()">🚘 Změnit Auto</button>
    <div class="game-button" id="bestScore">🥇 Nejlepší skóre: 0</div>
  </div>

  <div id="game" style="display:none">
    <div id="car">🚗<div id="carBox"></div></div>
    <div id="score">Skóre: 0</div>
    <button class="game-button" style="position: absolute; bottom: 10px; left: 10px;" onclick="pauseGame()">⏸️ Pauza</button>
  </div>

  <div id="pauseOverlay" class="centered" style="display:none">
    <div class="title">⏸️ ZASTAVENO</div>
    <button class="game-button" onclick="toggleSound()" id="pauseSound">🔊 Zvuk: Zapnuto</button>
    <button class="game-button" onclick="restartGame()">🔁 Restart</button>
    <button class="game-button" onclick="backToMenu()">🏠 Menu</button>
  </div>

  <div id="gameOver" class="centered" style="display:none">
    <div class="title">💀 GAME OVER</div>
    <button class="game-button" onclick="restartGame()">🔁 Restart</button>
    <button class="game-button" onclick="backToMenu()">🏠 Menu</button>
  </div>

  <div id="carSelection" class="centered" style="display:none">
    <div class="title">🚘 Vyber Auto</div>
    <div id="carList">
      <div class="car-option" onclick="selectCar('🚗')">🚗 (Základní)</div>
      <div class="car-option locked" onclick="selectCar('🚙', 20)">🚙 (Odemkne se při skóre 20+)</div>
      <div class="car-option locked" onclick="selectCar('🚓', 50)">🚓 (Odemkne se při skóre 50+)</div>
      <div class="car-option locked" onclick="selectCar('🚕', 100)">🚕 (Odemkne se při skóre 100+)</div>
    </div>
    <button class="game-button" onclick="closeCarSelection()">🔙 Zpět</button>
  </div>

  <script>
    function startGame() {
      document.getElementById('menu').style.display = 'none';
      document.getElementById('game').style.display = 'block';
      // Spuštění hlavní logiky hry by mělo být zde
      console.log("Hra spuštěna");
    }

    function openCarSelection() {
      document.getElementById('menu').style.display = 'none';
      document.getElementById('carSelection').style.display = 'block';
    }

    function closeCarSelection() {
      document.getElementById('carSelection').style.display = 'none';
      document.getElementById('menu').style.display = 'block';
    }

    function selectCar(carEmoji, requiredScore = 0) {
      const best = parseInt(localStorage.getItem('bestScore')) || 0;
      if (best >= requiredScore) {
        document.getElementById('car').innerHTML = carEmoji + '<div id="carBox"></div>';
        closeCarSelection();
      } else {
        alert(`Toto auto je zamčeno. Získej skóre alespoň ${requiredScore}.`);
      }
    }
  </script>
</body>
</html>
